<?xml version="1.0" encoding="UTF-8"?>
<chapter id="details.impexp">
<chapterinfo>
  <authorgroup>
    <author
>&Ace.Jones; &Ace.Jones.mail; </author>
  </authorgroup>
  <date
>2011-07-03</date>
  <releaseinfo
>4.6</releaseinfo>
</chapterinfo>

<title
>Importera och exportera</title>

<sect1 id="details.impexp.gnucash">
<sect1info>
  <author
>&Tony.Bloomfield; &Tony.Bloomfield.mail;</author>
</sect1info>

<title
>Import från &gnucash;</title>

<sect2>
<title
>&gnucash;-filer</title>

<para
>&kmymoney;s import från &gnucash; hanterar direkt läsning av standardfiler (&XML;) som skapas av &gnucash; version 1.8 och 2.0. Följande stöds inte: </para>

<itemizedlist>
  <listitem
><para
>import av databasdata (Postgres)</para
></listitem>
  <listitem
><para
>import av 'multibok'-filer</para
></listitem>
  <listitem
><para
>import till en befintlig fil i &kmymoney;</para
></listitem>
  <listitem
><para
>import av funktioner för mindre företag (anställda, fakturor, etc.)</para
></listitem>
  <listitem
><para
>export av &gnucash;-filer.</para
></listitem>
</itemizedlist>

<para
>Importen fungerar troligen bara riktigt om den ges en giltig fil. Det rekommenderas att &gnucash; funktion <guimenuitem
>Kontrollera och reparera alla</guimenuitem
> (i menyn <guimenu
>Handlingar</guimenu
>) körs innan ett försök att importera görs. </para>

<para
>Filer kan öppnas genom att ange filnamnet på kommandoraden (<command
>kmymoney &lt;sökväg till fil&gt;</command
>), eller med &kmymoney;s menyalternativ <menuchoice
> <shortcut
> <keycombo
>&Ctrl;<keysym
>O</keysym
></keycombo
> </shortcut
> <guimenu
>Arkiv</guimenu
> <guimenuitem
>Öppna</guimenuitem
> </menuchoice
> eller <menuchoice
> <guimenu
>Arkiv</guimenu
> <guisubmenu
>Importera</guisubmenu
></menuchoice
>. </para>

<para
>Likheten mellan de två produkterna betyder att mycket daglig data kan importeras på ett rättframt sätt. Dock finns det några områden där skillnader uppstår, och diverse alternativ tillhandahålls för att hantera dem. Följande avsnitt beskriver några av skillnaderna. Att förstå dem bör leda till en smärtfriare import. </para>
</sect2>

<sect2>
<title
>Likheter, skillnader och terminologi</title>

<sect3>
<title
>Användning för mindre företag</title>

<para
>Man bör observera att &kmymoney; är en <emphasis
>hemekonomihanterare</emphasis
>, och som sådan, inte direkt stöder några av &gnucash; företagsfunktioner, som skattetabeller, avlöningslistor och uppföljning av gods. Alla skuldkonton eller fordringskonton som hittas i en fil kommer att importeras som respektive skuld- och tillgångskonton. </para>
</sect3>

<sect3>
<title
>Konton</title>

<sect4>
<title
>Kontotyper</title>

<para
>For both products, the highest level of structure in the file is the account. &kmymoney; supports 5 main types of account: Asset, Liability, Income, Expense and Equity, each of which may have various subtypes, e,g., Checking, Credit Card, etc. &kmymoney; includes a 'standard' account for each of these five types, and all other accounts are held subordinate to one of these. &kmymoney; enforces more consistency (or less flexibility, depending on your point of view) between account types than does &gnucash;, and the importer will correct any inconsistencies it detects. This may result in a slightly different account structure, though this can, within reason, be amended after the import is complete. </para>
</sect4>

<sect4>
<title
>Kategorier</title>

<para
>&kmymoney; uses the term Category to denote an account of an Income or Expense type. Unlike &gnucash;, these are not considered as 'ledger' accounts, and entry of transactions folder into categories is not supported; allocations are made during transaction entry into other account types. </para>
</sect4>

<sect4>
<title
>Struktur och platsmarkörer</title>

<para
>&gnucash; supports the use of Placeholder accounts. In effect, these are just read-only accounts into which no transactions can be entered, but which function in an analogous fashion to folders in a folder structure, as a holder for other accounts. Though &kmymoney; does not support this feature as such, it does provide a parent/child account relationship, so the importer simulates placeholders by creating empty accounts. </para>
</sect4>

<sect4>
<title
>Avbildning av kontotyper</title>

<informaltable frame='all'>
<tgroup cols='2' align='left' colsep='1' rowsep='1'>
<thead>
  <row>
    <entry
>Typ i &gnucash;</entry
><entry
>Typ i &kmymoney;</entry>
  </row>
</thead>
<tbody>
  <row>
    <entry
><literal
>BANK</literal
></entry
><entry
><literal
>Checking</literal
></entry>
  </row>
  <row>
    <entry
><literal
>CHECKING</literal
></entry
><entry
><literal
>Checking</literal
></entry>
  </row>
  <row>
    <entry
><literal
>SAVINGS</literal
></entry
><entry
><literal
>Savings</literal
></entry>
  </row>
  <row>
    <entry
><literal
>ASSET</literal
></entry
><entry
><literal
>Asset</literal
></entry>
  </row>
  <row>
    <entry
><literal
>CASH</literal
></entry
><entry
><literal
>Cash</literal
></entry>
  </row>
  <row>
    <entry
><literal
>CURRENCY</literal
></entry
><entry
><literal
>Cash</literal
></entry>
  </row>
  <row>
    <entry
><literal
>MONEYMRKT</literal
></entry
><entry
><literal
>MoneyMarket</literal
></entry>
  </row>
  <row>
    <entry
><literal
>STOCK</literal
></entry
><entry
><literal
>Stock</literal
></entry>
  </row>
  <row>
    <entry
><literal
>MUTUAL</literal
></entry
><entry
><literal
>Stock</literal
></entry>
  </row>
  <row>
    <entry
><literal
>EQUITY</literal
></entry
><entry
><literal
>Equity</literal
></entry>
  </row>
  <row>
    <entry
><literal
>LIABILITY</literal
></entry
><entry
><literal
>Liability</literal
></entry>
  </row>
  <row>
    <entry
><literal
>CREDIT</literal
></entry
><entry
><literal
>CreditCard</literal
></entry>
  </row>
  <row>
    <entry
><literal
>INCOME</literal
></entry
><entry
><literal
>Income</literal
></entry>
  </row>
  <row>
    <entry
><literal
>EXPENSE</literal
></entry
><entry
><literal
>Expense</literal
></entry>
  </row>
  <row>
    <entry
><literal
>RECEIVABLE</literal
></entry
><entry
><literal
>Asset</literal
></entry>
  </row>
  <row>
    <entry
><literal
>PAYABLE</literal
></entry
><entry
><literal
>Liability</literal
></entry>
  </row>
</tbody>
</tgroup>
</informaltable>
</sect4>
</sect3>

<sect3>
<title
>Transaktioner och delningar</title>

<sect4>
<title
>Balanserade transaktioner</title>

<para
>Liksom i &gnucash; skrivs data in i form av transaktioner, där var och en i allmänhet består av två eller flera delade poster. I själva verket innehåller alltid giltiga transaktioner i &gnucash; minst två delningar, och för att rätta sig efter &gnucash; standard för dubbel bokföring, måste de vara i monetär balans (dvs. måste kunna balanseras till noll). &kmymoney; uppmuntrar till att använda standarden, men tvingar inte till det, men alla importerade transaktioner som inte är balanserade kommer att markeras i huvudboksvyn som att de har problem. </para>
</sect4>

<sect4>
<title
>Betalare</title>

<para
>&kmymoney; prefers that all transactions have a Payee (a generic term that encompasses both payees and payers), and unlike &gnucash;, a list of these payees is maintained. Payee names are generated by the importer from the &gnucash; transaction's Description field. </para>
</sect4>

<sect4>
<title
>Överföringar</title>

<para
>&kmymoney; använder begreppet överföring för att beskriva en transaktion som inte blandar in en kategori, utan bara överför pengar mellan tillgångskonton och/eller skuldkonton. </para>
</sect4>

<sect4>
<title
>Avstämmning</title>

<para
>&kmymoney; tillhandahåller en funktion för avstämning av konton som liknar den i &gnucash;, och motsvarande transaktionsstatus importeras. </para>
</sect4>
</sect3>

<sect3>
<title
>Varor</title>

<para
>&gnucash; använder termen Varor för att täcka både valutatillgångar och icke-valutatillgångar. De behandlas separat i &kmymoney;. </para>

<sect4>
<title
>Valutor</title>

<para
>&kmymoney; har inbyggt stöd för alla typer av utländska <link linkend="details.currencies"
>valutor</link
>. &kmymoney; kräver också att användaren anger en basvaluta, som är standardvalutan för nya konton. Vid import görs ett försök att bestämma den troligaste basvalutan, även om valet kan förkastas till förmån för något alternativ. </para>

<note
><para
>&kmymoney; stöder för närvarande inte konton med valörer i ogiltiga valutor (utom de som har ersatts av euro). För närvarande är det nödvändigt att ta bort alla sådana konton från &gnucash;-filen innan import. Vi hoppas förbättra situationen i en framtida utgåva. </para
></note>
</sect4>

<sect4 id="gncsecurities">
<title
>Värdepapper och investeringar</title>

<para
>Tillgångar som inte är medel (normalt aktier och obligationer) kallas värdepapper i &kmymoney;, och representerar huvudskillnaden mellan de två typerna, eftersom &kmymoney; kräver att alla konton som anges i värdepapper är underliggande till ett investeringskonto. Det beskrivs mer detaljerat i kapitlet om <link linkend="details.investments"
>Investeringar</link
>. Även om användare kan ha implementerat ett sådant förhållande, inför inte &gnucash; någon definierad struktur för det, så importen klarar inte av att detektera det och utföra en automatisk konvertering. Tre alternativ har därför gjorts tillgängliga: </para>

<itemizedlist>
  <listitem>
    <para
>Skapa ett separat investeringskonto för varje värdepapper, med samma namn som värdepappret.</para>
  </listitem>

  <listitem>
    <para
>Skapa ett enstaka investeringskonto som kommer att fungera som 'överliggande konto' för alla värdepapperskonton.</para>
  </listitem>

  <listitem>
    <para
>Skapa flera investeringskonto, och tilldela värdepapper till dem enligt användarens anvisningar.</para>
  </listitem>
</itemizedlist>

<para
>It depends entirely on user requirements which of these options is relevant in each situation, and in some cases, manual restructuring of accounts after importation may be necessary. </para>
</sect4>

<sect4>
<title
>Kurser och valutakurser</title>

<para
>Värdepapperskurser och valutakurser som visas i &gnucash; prisredigerare kommer att importeras. Dessutom skapas kurs- och valutakursposter för alla transaktioner som omfattar värdepapper och flera valutor. </para>
</sect4>

<sect4 id="details.impexp.gncquotes">
<title
>Direktkurser</title>

<para
>For obtaining online price and currency rate quotations, &gnucash; uses a package called <literal
>Finance::Quote</literal
>. Recent versions of &kmymoney; contain support for this package for obtaining stock quotes, and this will be used by default when importing data. You may however select to convert to the native method used by &kmymoney; which is covered in more detail in <link linkend="details.investments.onlinequotes"
>online quotes</link
>. </para>

<para
>If you choose to do so, the following dialog will allow selection of a 'native' &kmymoney; price source, or a user-defined source, for each account for which online quotes are required. However, the stock (ticker) symbol will be imported unchanged. Since this symbol will almost certainly be different in the two packages, it will need to be manually edited after completion of the import process. Future currency rate updates will not use <literal
>Finance::Quote</literal
>, and will always use the native retrieval method. </para>

<para>
	<screenshot>
	<mediaobject>
	<imageobject>
	<imagedata fileref="gnucash-select_price_source.png" format="PNG"/>
	</imageobject>
	</mediaobject>
	</screenshot>
</para>
</sect4>
</sect3>

<sect3 id="gncschedules">
<title
>Schemalagda transaktioner</title>

<para
>&kmymoney; behåller inte den skillnad som görs i &gnucash; mellan malltransaktioner och hur ofta de förekommer. Transaktionsdata kommer att dupliceras om samma mall används i olika scheman, men det har troligen inte så stor betydelse. </para>

<sect4>
<title
>Schematyper</title>

<para
>&kmymoney; classifies all schedules as one of three types, Bills, Deposits, or Transfers. Since &gnucash; does not make such a distinction, the importer attempts to determine the classification from the accounts and direction of money movements. It may be that in some cases incorrect assumptions are made, and these will need manual correction. </para>
</sect4>

<sect4>
<title
>Misstänkta scheman</title>

<para
>Vissa funktioner i &gnucash; schemalagda transaktioner är inte tillgängliga i &kmymoney;, så importen försöker att nå en rimlig kompromiss när data konverteras i varje enskilt fall. Transaktionerna markeras som misstänkta, och användaren ges tillfälle att redigera dem direkt under importprocessen. Exempel på situationer som kan orsaka detta är: </para>

<itemizedlist>
  <listitem>
    <para
>vissa terminintervall som stöds av &gnucash; är för närvarande inte tillgängliga i &kmymoney;</para>
  </listitem>

  <listitem>
    <para
>&kmymoney; stöder inte användningen av formler och variabler i beloppsfält</para>
  </listitem>

  <listitem>
    <para
>komplexa fall som ännu inte har identifierats vid import.</para>
  </listitem>
</itemizedlist>

<para
>Trots goda insatser, är det möjligt att en schemalagd transaktion kan orsaka ett allvarligt fel i &kmymoney;, på grund av de många alternativen som är inblandade. Om denna typ av problem verkar inträffa, erbjuder importen möjlighet att utelämna alla misstänkta scheman. </para>
</sect4>
</sect3>

<sect3>
<title
>Rapporter</title>

<para
>&kmymoney; tillhandahåller ett omfattande urval av inställningsbara rapporter, som beskrivs mer detaljerat under <link linkend="details.reports"
>Rapporter</link
>. De motsvarar dock inte nödvändigtvis exakt de rapporter som är tillgängliga i &gnucash;. </para>
</sect3>
</sect2>

<sect2>
<title
>Välja importalternativ</title>

<para id="details.impexp.gncoptions">
	<screenshot>
	<mediaobject>
	<imageobject>
	<imagedata fileref="gnucash-import_options.png" format="PNG"/>
	</imageobject>
	</mediaobject>
	</screenshot>
</para>

<sect3>
<title
>Hantering av investeringar</title>

<para
>Se <link linkend="gncsecurities"
>Värdepapper och investeringar</link
> ovan. </para>
</sect3>

<sect3>
<title
>Direktkurser</title>

<para
>Stäng av det om du vill använda den inbyggda metoden för framtida direktkurser. </para>

<para
>Se <link linkend="details.impexp.gncquotes"
>"Direktkurser"</link
> ovan. </para>
</sect3>

<sect3>
<title
>Schemalagda transaktioner</title>

<para
>Se <link linkend="gncschedules"
>"Schemalagda transaktioner"</link
> ovan. </para>
</sect3>

<sect3>
<title
>Kodningsalternativ</title>

<para
>Om ditt modersmål skrivs med bokstäver eller symboler som skiljer sig från de som används i latinska språk (dvs. i allmänhet västeuropeiska språk), representeras de på ett särskilt sätt ('kodas') i &gnucash;-filen. Om bokstäverna inte visas riktigt på skärmen, måste de avkodas. För närvarande är det ofta inte möjligt att detektera exakt vilken form av avkodning som måste användas, så du kan behöva markera alternativet och välja ett värde i listan. I allmänhet är det första värdet i listan det som anses vara lämpligt med dina landsinställningar (dvs. landet och språket som valdes när operativsystemet installerades), så det bör provas först. Eftersom importprocessen inte skriver över &gnucash;-filen, har du full frihet att experimentera med vilket som helst av alternativen. </para>
</sect3>

<sect3>
<title
>Alternativ för transaktionsanteckningar</title>

<para
>För vissa användarfall kan transaktioner i &gnucash;, som inte delats, innehålla kvarvarande, ofta felaktiga, anteckningsdata som normalt inte är synliga för användaren. När de importeras i &kmymoney;, kan denna data bli synlig, på grund av skillnad vid visning. Ofta har transaktionerna ett fält som beskriver transaktionens verkliga syfte. Om alternativet är markerat, används detta fält för att överskrida irrelevant anteckningsdata, om det finns. </para>
</sect3>

<sect3>
<title
>Felsökningsalternativ</title>

<para
>Dessa behöver bara användas i händelse av importproblem. Om du har sådana problem, bör du också rapportera dem till &kmymoney;s utvecklingslista &devlist;. Observera att bakåtspårningarna som skapas av alternativen kan innehålla data av konfidentiell natur, och alternativet <guilabel
>Anonymisera data</guilabel
> bör användas om den behöver göras öppet tillgängligt. </para>
</sect3>
</sect2>

<sect2>
<title
>Importrapport</title>

<para
>I slutet av behandlingen, skapar importen en rapport som visar antal olika behandlade objekt, och eventuella fel och anomalier som har inträffat. Rapporten visas på skärmen, och kan spara i en fil för senare granskning. En fullständig rapport kan innehålla följande avsnitt: </para>

<itemizedlist>
  <listitem>
    <para
>Antal poster</para>
  </listitem>

  <listitem>
    <para
>Inkonsekvens i kontotyper och utförda åtgärder</para>
  </listitem>

  <listitem>
    <para
>Detaljinformation om misstänkta scheman</para>
  </listitem>
</itemizedlist>

<para>
	<screenshot>
	<mediaobject>
	<imageobject>
	<imagedata fileref="gnucash-report.png" format="PNG"/>
	</imageobject>
	</mediaobject>
	</screenshot>
</para>
</sect2>
</sect1>

<sect1 id="details.impexp.qifimp">
<sect1info>
  <author
>&Thomas.Baumgart; &Thomas.Baumgart.mail;</author>
</sect1info>

<title
>Import av QIF</title>

<sect2>
<title
>Formatet QIF anses skadligt</title>

<para
>I allmänhet ska QIF-formatet undvikas när det är möjligt. Det är ett dåligt val för att förmedla ekonomisk data. Bland annat, lider QIF av följande problem: </para>

<itemizedlist>
  <listitem>
    <para
>Brist på standardiserat format. Olika versioner av samma program ger olika betydelser till samma element.</para>
  </listitem>

  <listitem>
    <para
>Brist på transaktionsidentifierare. Eftersom det inte finns något id-nummer som hör ihop med varje transaktion, är det som bäst slumpartat att matcha dubbletter.</para>
  </listitem>

  <listitem>
    <para
>Brist på uttrycksfullhet. Grammatiken är verkligt enkel, och kan inte återge djupet av den ekonomiska information som finns i dagens ekonomiska miljö.</para>
  </listitem>
</itemizedlist>

<para
>Det är allmänt orsaken att Intuit slutade stödja QIF-inmatning överhuvudtaget med <application
>Quicken</application
> 2005. Om du har möjlighet att hämta data på något annat sätt, som OFX, välj alltid det alternativet. </para>
</sect2>

<sect2>
<title
>Hur man importerar en QIF-fil</title>

<para
>För att importera en QIF-fil, försäkra dig först om att du har en giltig &kmymoney;-fil öppen. Välj därefter menyalternativet <menuchoice
><guimenu
>Arkiv</guimenu
><guisubmenu
>Importera</guisubmenu
> <guimenuitem
>QIF...</guimenuitem
> </menuchoice
>. </para>
	
<para>
	<screenshot>
	<mediaobject>
	<imageobject>
	<imagedata fileref="qifopen.png" format="PNG"/>
	</imageobject>
	</mediaobject>
	</screenshot>
</para>

<para
>The resulting dialog prompts for the QIF filename allowing you to locate the file by clicking on the <guibutton
>Browse</guibutton
> button. </para>

<para
>Also, &kmymoney; differentiates between the import of a bank statement file and historic data exported from another application. The default is to import a bank statement file. In case you are importing data from your previous personal finance manager application select the appropriate option. </para>

<para
>I allmänhet bör standardprofilen för QIF fungera med din QIF-data. I vissa fall kan det bli nödvändigt att använda en modifierad QIF-profil. Se <link linkend="details.impexp.qifimp.profile"
>nästa avsnitt</link
> för mer detaljinformation om ämnet. </para>

<para
>Klicka på <guibutton
>Importera</guibutton
> för att importera QIF-filen. </para>

<para
>&kmymoney; börjar söka igenom filen för att avgöra vilka format som används för att representera datum och tal. Om det inte går att avgöra ett datumformat utan tvetydighet, ber &kmymoney; användaren att välja ett från listan med möjliga datumformat. </para>

<para
>Next, &kmymoney; imports the data and creates all necessary objects, such as payee information, accounts and category records, and stock price information. Wherever possible, existing transactions will be matched against the imported information. A progress bar is shown and updated during the import process. </para>

<para
>In case &kmymoney; could not detect the name of the account to be imported, the user will be asked to select the account into which the data should be imported. If the account does not already exist in your file, a new account can be created by clicking on <guibutton
>Create</guibutton
>. </para>

<para
>Vid slutet av importen visar &kmymoney; ett statistikfönster för utdragsimporten. </para>

<para>
<screenshot>
	<screeninfo
>Utdragsstatistik</screeninfo>
	<mediaobject>
	<imageobject>
	<imagedata fileref="qif_report.png" format="PNG"/>
	</imageobject>
	<textobject>
	<phrase
>Utdragsstatistik</phrase>
	</textobject>
	</mediaobject>
</screenshot>
</para>

<para
>After importing, all of the imported transactions will be shown with a yellow background in the ledger view. In case &kmymoney; was able to match an imported transaction with an already existing transaction, the background is shown in light green. </para>

<para
>Nästa steg är att kontrollera importerad data och acceptera den. Det är en allmän process, och gäller också import från andra källor. Den sammanfattas i ett separat avsnitt av dokumentet. </para>

<note>
<para
>Färgerna som används för att markera importerade och matchade transaktioner är anpassningsbara, och kan vara annorlunda i din miljö. </para>
</note>
</sect2>

<!--
<sect2>
<title
>Accepting the imported transactions</title>
<para>
  
	When &kmymoney; has finished importing the QIF transactions the account will be shown with the imported transactions listed in Yellow.
</para>

<para>
<screenshot>
	<screeninfo
>Imported transactions</screeninfo>
	<mediaobject>
	<imageobject>
	<imagedata fileref="qifimportverify.png" format="PNG"/>
	</imageobject>
	<textobject>
	<phrase
>Imported transactions</phrase>
	</textobject>
	</mediaobject>
</screenshot>
</para>

<para>
	Some of your transactions may be flashing red in the ledger.  
	This is because they need to be assigned a category.  
	The importer was not able to automatically assign a category based on your past transaction history.
</para>

<para
>	
	Transaction data can be edited or even deleted if needed.  To edit a transaction simply double click on the entry or hit enter when the entry is highlighted.  Once finished click on <guibutton
>OK</guibutton
> to accept the imported transactions or <guibutton
>Cancel</guibutton
> to remove the imported transactions.
</para>

</sect2>

<sect2
><title
>Importing Investments</title>

<para>
	Please note that if you are importing a file with investment transactions, those investments must first exist in your &kmymoney; file.
	The trading symbol is used to match, so please ensure that the symbol in &kmymoney; is exactly the same as the one in the file you're importing.
</para>
</sect2>
-->

<sect2 id="details.impexp.qifimp.profile">
<title
>Ställa in en QIF-profil</title>

<para
>Because there is no universally standard format for a QIF file, different vendors have taken liberties with the format, and introduced their own nuances. The QIF Profile allows &kmymoney; to know about the peculiarities of your file. To edit an existing QIF Profile, or to create a new one, press the <guibutton
>New</guibutton
> button on the QIF Import dialog, near the profile selector. </para>

<para>
	<screenshot>
	<mediaobject>
	<imageobject>
	<imagedata fileref="qifimport-qifprofileeditor.png" format="PNG"/>
	</imageobject>
	<textobject>
	<phrase
>QIF-profileditor</phrase>
	</textobject>
	</mediaobject>
	</screenshot>
</para>

<note>
<para
>Previous versions of &kmymoney; used to have a tab for date and amount specifications. &kmymoney; now determines those settings by scanning the file. If it cannot figure out all settings, it will interrogate the user during import. </para>
</note>
<!--
<para>
	The most commonly changed thing between QIF implementations is the date format.  
	So if this is the first time you're importing a QIF file, spend a few moments to figure out what format the dates are in, and set the QIF Profile accordingly.  
	See the discussion below on apostrophe format for more details.
</para>

<para>
	<screenshot>
	<mediaobject>
	<imageobject>
	<imagedata fileref="qifimport-qifprofiledate.png" format="PNG"/>
	</imageobject>
	<textobject>
	<phrase
>QIF Profile Date</phrase>
	</textobject>
	</mediaobject>
	</screenshot>
</para>

</sect2>

<sect2
><title
>Apostrophe format</title>

<para>
	Many common QIF writers use a 2-digit representation for the year. 
	This is ambiguous, because the importer cannot know which century the date belongs in.
	To make things even more complicated, QIF files will often used an apostrophe as a year separator to indicate that the date belongs in the OTHER century from the default.
</para>
<para>
	For example, if the default century is 1900-1999, the date 12/31/95 would mean 1995.  The date 12/31'05 would mean 2005.
</para>
<para>
	Because the QIF format is not standardized, it's impossible to know which century is desired.
	This is why you have to explicitly state it in the QIF profile.
	You do this by specifying which century is intended when an apostrophe is found.
	In the example above, you would set the Apostrophe Format to &quot;2000-2099&quot;, so dates with an apostrophe will be interpreted as being &gt; year 2000.
	In this case, dates without an apostrophe will be treated as being in the 1900's.
</para>
-->
</sect2>

<sect2
><title
>Transaktionsmatchning</title>

<para
>As noted previously, one of the major drawbacks of the QIF format is the lack of a unique identifier for each transaction. Thus, if you import a QIF file and some of the transactions are already in your ledger, you may get duplicates. &kmymoney; attempts to get around this by looking for transactions that look similar to those you already have. If it finds something that looks like the same transaction, it will match the apparent duplicate. </para>

<para
>Det kan vara ett problem om du har transaktioner som ser alltför lika ut, men i själva verket är olika. I detta fall, kan du senare försöka att ta bort matchning av transaktionerna i huvudboksvyn. </para>
</sect2>

<sect2>
<title
>Skriva ett importfilter</title>

<para
>Ibland kan du ha data i ett eget format, som värden åtskilda med kommatecken (CSV), eller något annat som är speciellt för din situation. Från version 4.6 inkluderar &kmymoney; ett insticksprogram för CSV-import, men du kan ändå importera filen i &kmymoney; med ett QIF-importfilter. Ett filter är ett eget program som du skriver, som tar din speciella fil som indata, och skapar en QIF-fil som utdata. Det kan vara ett skalskript, ett Perl-skript, ett kompilerat program skrivet i C eller C++, eller vad som helst som du kan tänka ut, under förutsättning att systemet kan köra det. </para>

<para
>För att använda det, redigera din QIF-favoritprofil, och välj filterfliken. Skriv in platsen för filterprogrammet när du blir tillfrågad. Därefter körs filen som du väljer att importera först genom filtret, så fort du gör en QIF-import med användning av den här profilen. </para>

<para
>Ett vanligt problem är att konvertera en lista med värden åtskilda av kommatecken till en QIF-fil. Det är ett uppenbart fall för verktyget <command
>awk</command
>. Skapa ett skript som heter <filename
>csv2qif.awk</filename
>, med följande två raders innehåll: </para>

<programlisting
>BEGIN { FS=&quot;,&quot;; print &quot;!Type:Bank&quot; }

      { print &quot;D&quot;$1; print &quot;T&quot;$2; print &quot;N&quot;$3; print &quot;P&quot;$4; print &quot;M&quot;$5; print &quot;^&quot; }
</programlisting>

<para
>Ändra därefter QIF-nycklarna (D,T,N,P,M) så att de stämmer med ordningen av CSV-data. Ställ in indatafiltret till <userinput
>awk -f csv2qif.awk</userinput
>. </para>

<para
>Ett annat problem uppstår ibland med kodningen av QIF-filer. &kmymoney; förväntar sig att filer ska vara kodade med UTF8. Om filen är kodad på något annat sätt, kan det vara användbart att konvertera den till UTF8. För att exempelvis konvertera den från iso-8859-1, skulle du ställa in indatafiltret till <userinput
>recode iso-8859-1..utf-8</userinput
>. </para>

</sect2>
<sect2>
<title
>Särskilda utökningar av QIF i &kmymoney;</title>

<para
>Som redan nämnt, är en av de största nackdelarna med QIF-formatet avsaknaden av en unik identifierare för varje transaktion. Om du skriver en egen QIF-filskapare (eller filter, som beskrivs ovan), kan du komma förbi problemet. &kmymoney; stöder fältet '#'. Importen tolkar det som ett unikt transaktions-id, och bortser från posten om transaktionen redan finns i systemet. </para>
</sect2>
</sect1>

<sect1 id="details.impexp.qifexp">
<title
>Export av QIF</title>
<para
>To export one of your accounts to a QIF file, choose the <menuchoice
><guimenu
>File</guimenu
><guisubmenu
>Export</guisubmenu
> <guimenuitem
>QIF...</guimenuitem
></menuchoice
> menu item. You will be prompted for which single account to export, what file to export it to, and what QIF Profile to use. </para>

<note
><para
>För närvarande hanterar inte QIF export av investeringar. </para
></note>

<para>
	<screenshot>
	<mediaobject>
	<imageobject>
	<imagedata fileref="qifimport-export.png" format="PNG"/>
	</imageobject>
	<textobject>
	<phrase
>QIF-export</phrase>
	</textobject>
	</mediaobject>
	</screenshot>
</para>
</sect1>

<sect1 id="details.impexp.ofx">
<sect1info>
  <author
>&Ace.Jones; &Ace.Jones.mail;</author>
  <author
>&Thomas.Baumgart; &Thomas.Baumgart.mail;</author>
</sect1info>
<title
>OFX-importinsticksprogram</title>

<sect2>
<title
>Hämta insticksprogrammet</title>

<para
>&kmymoney; will import OFX files painlessly. However, this functionality is not built into the core program. You must obtain and install the OFX Importer Plugin. Once that is installed, the command to import OFX files will automatically show up under the <menuchoice
><guimenu
>File</guimenu
> <guisubmenu
>Import</guisubmenu
></menuchoice
> submenu. </para>

<para
>Note that many prepackaged versions of &kmymoney; were built with the OFX importer already included or available as a separate package. If the OFX importer does not seem to be installed in your version, the first place to check is in the same place you got your base &kmymoney; package. </para>

<para
>If you have installed from RPM, the OFX Importer Plugin is contained within the kmymoney-ofx package. It should be available from whatever source you got the base &kmymoney; package. If you have built from sources, all you need to do is have preferably the libOFX 0.9 development headers and libraries installed on your system. The &kmymoney; build process will detect these and compile the plugin. At the time of release of &kmymoney; 4.6, the latest libofx version was 0.9.4, which is also the minimum required version. </para>

<para
>Skulle du stöta på problem när du försöker kompilera &kmymoney;, och du är säker på att du har rätt version av libOFX installerad, kontakta gärna utvecklarnas lista &devlist; för hjälp. Inkludera en kopia av filen <filename
>config.log</filename
>, först komprimerad med <command
>gzip</command
>. </para>
</sect2>

<sect2>
<title
>Vad är OFX</title>

<para
>OFX stands for <quote
>Open Financial Exchange</quote
>. According to the <ulink url="https://www.ofx.net/"
>OFX web site</ulink
> <quote
>Open Financial Exchange (OFX) is a unified specification for the electronic exchange of financial data between financial institutions, businesses and consumers via the Internet. OFX is not a financial institution.</quote
> The specification defines formats for transfer of financial data both by file and by direct interchange. </para>

<para
>Även om standarden är mycket fullständigare och stabilare än QIF, finns det ändå variationer, beroende på den specifika implementeringen som används av ett visst institut. OFX-filer kan ha filändelsen <quote
>OFX</quote
> eller <quote
>QFX</quote
> (stora eller små bokstäver). Det innebär inte någon särskild skillnad i innehåll. Specifikationen är baserad på &XML;, alltså kan filerna läsas av vilken texteditor som helst, men eftersom blanktecken inte är relevanta för själva innehållet använder vissa implementeringar inte några alls, vilket gör dem mycket svårlästa för en människa. </para>

<para
>Another site with good information is <ulink url="https:/ofxhome.com/"
>OFX Home</ulink
>. They maintain a directory of financial institutions that support OFX. This can be useful if you have problems setting up <link linkend="details.impexp.ofxdirectconnect"
>OFX direct connect.</link
> They also have a forum for discussions about OFX issues. </para>
</sect2>

<sect2>
<title
>Importera en OFX-fil</title>

<para
>The most basic way to import an OFX file is to choose the importer from the menu bar. From the <menuchoice
><guimenu
>File</guimenu
><guisubmenu
>Import</guisubmenu
> <guimenuitem
>OFX...</guimenuitem
></menuchoice
> menu item. If OFX does not show up under Import, you do not have the OFX Importer Plugin installed correctly. Please see the previous section. </para>

<para
>The first thing the importer will do is ask you into which account to import the transactions. If there are transactions from multiple accounts in your file, you will be asked this question multiple times. </para>

<para
>Efter import, kanske vissa transaktioner visas med ett utropstecken på en gul triangel i huvudboken. Det beror på att de behöver tilldelas en kategori. Importen kunde inte automatiskt tilldela en kategori baserat på din tidigare transaktionshistorik. Du kan redigera varje transaktioner i huvudboken för att tilldela den en kategori, så kommer markeringen att tas bort. </para>

<para
>Please note that this section describes the <quote
>native</quote
> OFX importer. OFX files may also be imported using the AqBanking Importer Plugin if you have installed that. Note that the two importers do behave slightly differently, and they are written and supported by two different developers. </para>
</sect2>

<sect2>
<title
>Importera investeringar</title>

<para
>Observera att om du importerar en fil med investeringstransaktioner, måste investeringarna först finnas i &kmymoney;s fil. Aktiesymbolen används för matchning, så försäkra dig om att symbolen i &kmymoney; är exakt likadan som den i filen du importerar. </para>
</sect2>

<sect2 id="details.impexp.webconnect">
<title
>Webbanslutning</title>

<para
>The easiest way to import an OFX file is to set up Web Connect. Visit your bank's web site, and click on a link to download an OFX file. Your browser should ask you what program you would like to use to open the file. Point your browser to &kmymoney;. It will then import the downloaded OFX file into the &kmymoney; file you most recently had open. You can also change the file associations of your desktop environment, and have &kmymoney; open the OFX file automatically for you. </para>

<para
>Om du behöver importerar OFX-filen till en annan fil i &kmymoney;, ladda först den filen i &kmymoney;, och besök därefter bankens hemsida. </para>
</sect2>

<sect2 id="details.impexp.ofxdirectconnect">
<title
>Direktanslutning</title>

<para
>OFX Direct Connect is now supported in &kmymoney;. This gives you the ability to contact your bank directly to obtain statements. In the future, there will be more help written, and this will be moved to its own section. </para>

<para
>To enable this feature, you must compile &kmymoney; with the <userinput
><option
>--enable-ofxbanking</option
></userinput
> switch (now the default). </para>

<para
>Please be warned: Many banks require a separate signup, will give you a separate password or PIN, and may even charge you a separate fee for this service. No bank directly supports &kmymoney;. You will have to tell them you want to bank directly from <application
>MS Money</application
> or <application
>Quicken</application
>. </para>

<para
>The first step is to configure each account for which you wish to download statements. Go to the Accounts view, right click on the account you wish to configure, and choose <guimenuitem
>Map to online account...</guimenuitem
>. In case more than one online banking plugin is installed on your system you will be asked which one to use. For the internal OFX method select <guimenuitem
>&kmymoney; OFX</guimenuitem
>. A list of banks will be downloaded from the Internet and a wizard will guide you through choosing a bank, entering your username and password, and selecting an account. Should you find that your bank is not listed, then it may still be possible to use the manual option. Your bank may be able to provide the required parameters, or you may have to do some research to find them. </para>

<note>
  <para
>Setting up OFX Direct Connect can sometimes be a challenge, especially as the implementation at most institutions do not provide sufficient details in error messages. One particular issue to note is that many institutions require you to change your password the first time you access it online using this method. Unfortunately, at this time, the library that &kmymoney; uses (libofx) does not have a way to interactively change a password. In some cases, it is possible to get a technical support person at the institution to change the password for you. Until we are able to expand this section with more detailed troubleshooting information, if you have trouble getting this to work for you, you can ask for help on the &kmymoney; developer list &devlist;. </para>
</note>

<para
>Once you have an account set up with online banking, go to the ledger for that account. Then choose <menuchoice
><guimenu
>Account</guimenu
><guimenuitem
>Update account...</guimenuitem
></menuchoice
> menu item. This will connect to your bank, and download a statement for the last 60 days. </para>

<note>
  <para
>In version of &kmymoney; prior to 4.6, the payee name was always taken from the <literal
>PAYEEID</literal
> field. As of version 4.6, the payee name can be based on either the <literal
>PAYEEID</literal
>, <literal
>NAME</literal
>, or <literal
>MEMO</literal
> field in the OFX transaction. You can configure this feature and some other OFX direct connect settings by selecting the appropriate tab in the <link linkend="details.accounts.edit"
>Edit account</link
> dialog. </para>
</note>
</sect2>

<sect2>
<title
>Exportera en OFX-fil</title>

<para
>It is not possible to export your data as an OFX file currently. If you are interested to contribute in this area, please contact the libofx development team for details. </para>
</sect2>
</sect1
>&details-impexp-csv; &details-impexp-csvexp; &details-impexp-woob; <sect1 id="details.impexp.plugins">
<title
>Skriva importinsticksprogram</title>

<para
>&kmymoney; contains explicit support for importer plugins. If you have a custom format, and you would like to write an importer plugin, we would value your contribution. To do so, you'll need to compile the program from source. Then use the OFX Importer Plugin as an example. </para>
</sect1>
</chapter>
